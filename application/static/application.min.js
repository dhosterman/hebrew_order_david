function togglePostalAddress(){var a=$("#id_postal_address, #id_postal_city, #id_postal_state, #id_postal_zip"),b=$("#id_postal_same_as_home:checked").length<1;a.each(b?function(){$(this).closest(".form-group").show()}:function(){$(this).closest(".form-group").hide()})}function addError(a,b){a.addClass("validation-error");var c=$("<p>").addClass("error-message");c.html(b),a.after(c)}function removeError(a){a.removeClass("validation-error"),errorMessage=a.parent().find(".error-message"),errorMessage.remove()}function isValidTn(a,b){var c=/^\d{3}-\d{3}-\d{4}$/,d=!1;return null!==a.match(c)&&(d=!0),b!==!0||d||""!==a||(d=!0),d}function isValidEmail(a,b){var c=/(([a-zA-Z0-9\-?\.?]+)@(([a-zA-Z0-9\-_]+\.)+)([a-z]{2,3}))+$/,d=!1;return null!==a.match(c)&&(d=!0),b!==!0||d||""!==a||(d=!0),d}$(document).ready(function(){function a(a,h){var i=!0;$(b).each(function(){var b=$(this);("all"===h||b.is(":visible"))&&(removeError(b),void 0===b.val()||""===b.val()?(a.stopImmediatePropagation(),a.preventDefault(),i=!1,addError(b,"This field is required.")):removeError(b))}),$(e).each(function(){var b=$(this);("all"===h||b.is(":visible"))&&-1===b.attr("class").indexOf("validation-error")&&isValidTn(b.val())===!1&&(a.stopImmediatePropagation(),a.preventDefault(),i=!1,addError(b,"Please use a phone number in the format: 123-456-7890."))}),$(f).each(function(){var b=$(this);("all"===h||b.is(":visible"))&&(isValidTn(b.val(),!0)===!1?(removeError(b),a.stopImmediatePropagation(),a.preventDefault(),i=!1,addError(b,"Please use a phone number in the format: 123-456-7890.")):removeError(b))}),$(g).each(function(){var b=$(this);("all"===h||b.is(":visible"))&&(-1===b.attr("class").indexOf("validation-error")&&-1===$.inArray(b.val().length,[0,2])?(a.stopImmediatePropagation(),a.preventDefault(),i=!1,addError(b,"Please use a 2 letter state code such as: TX")):2===b.val().length&&removeError(b))}),$(c).each(function(){var b=$(this);("all"===h||b.is(":visible"))&&-1===b.attr("class").indexOf("validation-error")&&isValidEmail(b.val())===!1&&(a.stopImmediatePropagation(),a.preventDefault(),i=!1,addError(b,"Please use a valid email address."))}),$(d).each(function(){var b=$(this);("all"===h||b.is(":visible"))&&(isValidEmail(b.val(),!0)===!1?(removeError(b),a.stopImmediatePropagation(),a.preventDefault(),i=!1,addError(b,"Please use a valid email address.")):removeError(b))});var j=$("#id_email");("all"===h||j.is(":visible"))&&$.ajax({url:"/accounts/existing_user",data:{email:j.val()},async:!1}).done(function(b){b.exists&&(removeError(j),a.stopImmediatePropagation(),a.preventDefault(),i=!1,addError(j,"An account with this email address already exists."))}),"all"!==h||i||alert("Validation error. Please review all fields and try again.")}var b=[$("#id_email"),$("#id_first_name"),$("#id_last_name"),$("#id_home_address"),$("#id_home_city"),$("#id_home_state"),$("#id_home_zip"),$("#id_home_phone"),$("#id_work_phone"),$("#id_mobile_phone"),$("#id_occupation-occupation"),$("#id_occupation-business_name"),$("#id_occupation-address"),$("#id_occupation-city"),$("#id_occupation-state"),$("#id_occupation-zip"),$("#id_date_of_birth_month"),$("#id_date_of_birth_day"),$("#id_date_of_birth_year"),$("#id_city_of_birth"),$("#id_country_of_birth"),$("#id_sponsor")],c=[$("#id_email")],d=[$("#id_wife-email")],e=[$("#id_home_phone"),$("#id_work_phone"),$("#id_mobile_phone")],f=[$("#id_wife-mobile_phone"),$("#id_sponsor_phone"),$("#id_occupation-phone")],g=[$("#id_home_state"),$("#id_state"),$("#id_postal_state"),$("#id_occupation-state")];$("input").each(function(){$(this).attr({required:!1})}),$("#application-form").on("click",".next",function(b){a(b,"visible")}),$("#application-form").on("click",".submit-application",function(b){$(".accept-terms").prop("checked")||(b.preventDefault(),alert("You must accept the terms and conditions before submitting.")),a(b,"all")}),togglePostalAddress(),$("#id_postal_same_as_home").on("change",function(){togglePostalAddress()}),$("#current-committees-formset").formset({animateForms:!0}),$("#children-formset").formset({animateForms:!0});{var h=$("#id_married"),i=$(".wife-pill");$("#wife-tab")}h.on("change",function(){h.prop("checked")?i.show():i.hide()}),h.prop("checked")||i.hide();{var j=$("#id_children"),k=$(".children-pill");$(".childrenTab")}j.on("change",function(){j.prop("checked")?k.show():k.hide()}),j.prop("checked")||k.hide(),$("form").on("click",".next",function(){var a=$(".nav-pills > li.active"),b=$(".nav-pills> li:visible").index(a);b+=1;var a=$($(".nav-pills > li:visible")[b]);a.find("a").removeClass("inactive").attr("data-toggle","tab").trigger("click")}),$("form").on("click",".back",function(){var a=$(".nav-pills > li.active"),b=$(".nav-pills> li:visible").index(a);b-=1;var a=$($(".nav-pills > li:visible")[b]);a.find("a").trigger("click")})});